<!DOCTYPE html>
<html>
  <head>
    {{ headContent() }}
    {{ bootstrapLib() }}
    <meta name="viewport" content="width=device-width, initial-scale=1">
		<style>
			html, body, #chart, iframe {
				height: 100%;
				width: 100%;
				margin: 0;
				border: 0;
			}
      .wrapper {
        margin-left: auto;
        margin-right: auto;
        max-width: 800px;
      }
      @media screen and (max-width: 805px) {
        .wrapper {
          max-width: 80%;
        }
      }
		</style>
    <script src="survey.js"></script>
  </head>
  <body>
    <div class="wrapper">
        {{ selector }}
        <div id="chart"></div>
    </div>
    <script>
      Shiny.addCustomMessageHandler("init", function(data) {
        console.log("init", data);
        var updateSurvey = createSurvey("#chart", data);
        Shiny.addCustomMessageHandler("update", function(filtered_data) {
          console.log("update", filtered_data);
          updateSurvey(filtered_data);
        });
      });
    </script>
  </body>
</html>